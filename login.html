<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tap and Earn Rewards</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 flex items-center justify-center min-h-screen p-4">

    <!-- Login Container -->
    <div id="login-container" class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-2xl w-full max-w-sm flex flex-col items-center space-y-6 transform transition-transform duration-300 hover:scale-105">

        <!-- App Icon and Name -->
        <div class="flex flex-col items-center space-y-4">
            <span class="text-7xl">ðŸ’°</span>
            <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600">
                Tap & Earn
            </h1>
        </div>

        <!-- Login Form -->
        <div class="w-full flex flex-col items-center space-y-4">
            <label for="user-name-input" class="text-lg font-semibold text-gray-700 dark:text-gray-300">
                Enter your name to play
            </label>
            <input type="text" id="user-name-input" placeholder="Your Name" class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-400 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200 transition-all duration-200">
            <button id="start-button" class="w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-xl shadow-md hover:scale-105 active:scale-95 transition-all duration-200 focus:outline-none">
                Get Started
            </button>
        </div>

        <!-- Login Message Box -->
        <div id="login-message-box" class="h-6 text-center text-red-500 font-semibold opacity-0 transition-opacity duration-300"></div>

    </div>

    <!-- Main Game Container (initially hidden) -->
    <div id="game-container" class="hidden bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-2xl w-full max-w-sm flex-col items-center space-y-6 transform transition-transform duration-300 hover:scale-105">

        <!-- Game Title and User Name -->
        <div class="flex flex-col items-center space-y-2">
            <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 animate-pulse">
                Welcome, <span id="user-name-display"></span>!
            </h1>
            <span class="text-sm text-gray-500 dark:text-gray-400">Time to earn some points!</span>
        </div>

        <!-- Score Display -->
        <div class="flex flex-col items-center">
            <span class="text-sm font-semibold text-gray-500 dark:text-gray-400">Current Points</span>
            <span id="points-display" class="text-6xl font-bold text-purple-600 dark:text-purple-400 select-none">0</span>
        </div>

        <!-- Tap Button -->
        <button id="tap-button" class="w-48 h-48 bg-gradient-to-br from-green-400 to-blue-500 text-white text-8xl font-black rounded-full shadow-lg hover:shadow-xl active:scale-95 transition-all duration-150 transform-gpu focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-600 animate-bounce cursor-pointer">
            âœ¨
        </button>

        <!-- Message Display -->
        <div id="message-box" class="h-8 text-center text-green-500 font-semibold transition-opacity duration-300 opacity-0"></div>

        <!-- Rewards Section -->
        <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-2xl w-full flex flex-col items-center space-y-4">
            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-300">
                Claim Reward (Cost: 10 points)
            </h2>
            <button id="reward-button" class="w-full px-6 py-3 bg-gray-300 text-gray-500 font-bold rounded-xl shadow-md transition-all duration-200 transform hover:scale-105 focus:outline-none cursor-not-allowed" disabled>
                Claim Now
            </button>
            <div class="flex items-center space-x-2 text-sm font-semibold text-gray-600 dark:text-gray-400">
                <span>Rewards Claimed:</span>
                <span id="rewards-claimed-display" class="text-lg font-bold text-purple-600 dark:text-purple-400">0</span>
            </div>
        </div>
    </div>

    <!-- JavaScript for Game Logic -->
    <script>
        // Use `window.onload` to ensure all HTML elements are loaded before the script runs.
        window.onload = function() {
            // --- UI Elements ---
            const loginContainer = document.getElementById('login-container');
            const gameContainer = document.getElementById('game-container');
            const userNameInput = document.getElementById('user-name-input');
            const startButton = document.getElementById('start-button');
            const loginMessageBox = document.getElementById('login-message-box');
            const userNameDisplay = document.getElementById('user-name-display');
            
            const pointsDisplay = document.getElementById('points-display');
            const tapButton = document.getElementById('tap-button');
            const rewardButton = document.getElementById('reward-button');
            const rewardsClaimedDisplay = document.getElementById('rewards-claimed-display');
            const gameMessageBox = document.getElementById('message-box');

            // --- Game State Variables ---
            let points = 0;
            let rewardsClaimed = 0;
            const rewardCost = 10;
            const clickValue = 1;

            // --- Utility Functions ---

            /**
             * Displays a message in a specified message box for a short duration.
             * @param {HTMLElement} messageBox The element to display the message in.
             * @param {string} message The message to display.
             * @param {string} color The Tailwind text color class (e.g., 'text-red-500').
             */
            function showMessage(messageBox, message, color) {
                // Clear previous classes and set the new ones
                messageBox.className = `h-6 text-center font-semibold transition-opacity duration-300 opacity-100 ${color}`;
                messageBox.textContent = message;

                // Fade out the message after 1.5 seconds
                setTimeout(() => {
                    messageBox.classList.remove('opacity-100');
                    messageBox.classList.add('opacity-0');
                }, 1500);
            }

            // --- Login Logic ---

            startButton.addEventListener('click', () => {
                const userName = userNameInput.value.trim();
                if (userName === '') {
                    showMessage(loginMessageBox, 'Please enter your name!', 'text-red-500');
                } else {
                    // Hide the login container and show the game container
                    loginContainer.classList.add('hidden');
                    gameContainer.classList.remove('hidden');
                    gameContainer.classList.add('flex'); // Add flex to make it a flex container again
                    
                    // Display the user's name in the game
                    userNameDisplay.textContent = userName;
                }
            });

            // --- Game Logic ---

            /**
             * Updates the points and rewards displays on the page.
             */
            function updateDisplays() {
                pointsDisplay.textContent = points;
                rewardsClaimedDisplay.textContent = rewardsClaimed;
            }

            /**
             * Checks if the user has enough points to claim a reward and updates the reward button state.
             */
            function checkRewardStatus() {
                if (points >= rewardCost) {
                    rewardButton.disabled = false;
                    // Change button styling for active state
                    rewardButton.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                    rewardButton.classList.add('bg-gradient-to-r', 'from-pink-500', 'to-red-500', 'text-white', 'cursor-pointer');
                } else {
                    rewardButton.disabled = true;
                    // Change button styling for disabled state
                    rewardButton.classList.remove('bg-gradient-to-r', 'from-pink-500', 'to-red-500', 'text-white', 'cursor-pointer');
                    rewardButton.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                }
            }

            // Event listener for the tap button
            tapButton.addEventListener('click', () => {
                points += clickValue;
                updateDisplays();
                checkRewardStatus();
                // Show a brief message to the user
                showMessage(gameMessageBox, `+${clickValue} Point!`, 'text-blue-500');
            });

            // Event listener for the reward button
            rewardButton.addEventListener('click', () => {
                // Check if the button is not disabled (a failsafe)
                if (points >= rewardCost) {
                    points -= rewardCost;
                    rewardsClaimed++;
                    updateDisplays();
                    checkRewardStatus();
                    // Show a success message to the user
                    showMessage(gameMessageBox, 'Reward Claimed!', 'text-green-500');
                } else {
                    showMessage(gameMessageBox, 'Not enough points!', 'text-red-500');
                }
            });

            // Initial setup on page load
            updateDisplays();
            checkRewardStatus();
        }
    </script>
</body>
</html>
